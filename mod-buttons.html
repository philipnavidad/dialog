<!DOCTYPE html>
<html>
<head>
<script src="https://aframe.io/releases/0.3.0/aframe.min.js"></script>
<script src="https://cdn.rawgit.com/AltspaceVR/AltspaceSDK/v2.4.2/dist/altspace.min.js"></script>
<script src="navigate.js"></script>
<script src="components/avr-visible.js"></script>
<script src="components/visible-to-moderators.js"></script>
</head>
<body>
<a id="altlink" style="display: none;" href="altspace://account.altvr.com/api/spaces/campfire-lobby"></a>
<a id="weblink" style="display: none;" href="https://xkcd.com"></a>
<a-scene altspace="fullspace: true">
    <a-assets>
        <img id="close" src="icon-close.png">
        <a-mixin id="button"
            geometry="primitive: plane; width: 0.4; height: 0.1;" material="color: gray"
            n-cockpit-parent altspace-cursor-collider="enabled: true"></a-mixin>
        <a-mixin id="button-text"
            n-text="fontSize: 2; horizontalAlign: middle"
            position="0 0 0.02" scale="0.3 0.3 0.3" n-cockpit-parent></a-mixin>
        <a-mixin id="closes-dialog"
            wire="on: click; emit: close-dialog; targets: #dialog"></a-mixin>
    </a-assets>
    <a-entity id="dialog" position="0 0.6 -1" n-cockpit-parent>
        <a-animation attribute="scale" begin="close-dialog" dur="1" from="1 1 1" to="0.0001 0.0001 0.0001" fill="forwards" direction="normal" repeat="0"></a-animation>
        <a-plane color="black" width="1" height="0.5" opacity="0.3" n-cockpit-parent altspace-cursor-collider="enabled: true"></a-plane>
        <a-entity
            n-text="fontSize: 2; text: This <i>should</i> open<br>a browser; horizontalAlign: middle"
            position="0 0.1 0.1" scale="0.3 0.3 0.3"
            n-cockpit-parent>
        </a-entity>
        <a-entity
            mixin="button closes-dialog" position="0 -0.05 0.01"
            navigate="link: #weblink">
            <a-entity mixin="button-text" n-text="text: Visit Now;"></a-entity>
        </a-entity>
        <a-entity
            mixin="button closes-dialog" position="0 -0.17 0.01"
            navigate="link: #altlink"
            avr-visible="false" visible-to-moderators>
            <a-entity mixin="button-text" n-text="text: Teleport Now;"> </a-entity>
        </a-entity>
        <a-entity
            mixin="closes-dialog"
            position="0 -0.35 0"
            scale="0.05 0.05 0.05"
            geometry="primitive: circle" material="transparent: true; src: #close"
            n-cockpit-parent altspace-cursor-collider="enabled: true">
        </a-entity>
    </a-entity>
</a-scene>
</body>
</html>
